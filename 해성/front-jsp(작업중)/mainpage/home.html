<%@ page contentType="text/html;charset=UTF-8" language="java" %> 
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HashTagPAGE_Home</title>
    <link
      rel="stylesheet"
      href="${pageContext.request.contextPath}/css/00_style.css"
    />
    <link
      rel="stylesheet"
      href="${pageContext.request.contextPath}/css/home.css"
    />
    <link
      rel="stylesheet"
      href="${pageContext.request.contextPath}/css/header.css"
    />
    <link
      rel="stylesheet"
      href="${pageContext.request.contextPath}/css/footer.css"
    />
    <!-- Swiper CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
  </head>
  <body>
    <div class="page">
      <!-- Í≥µÌÜµ Ìó§Îçî -->
      <jsp:include page="/WEB-INF/views/common/header.jsp" />
      <main>
        <div class="main-box mt4 mb4">
          <!-- ÏÉÅÎã® Ïù¥Î≤§Ìä∏ Ïä¨ÎùºÏù¥Îìú -->
          <section class="top-banner">
            <div class="swiper topSwiper">
              <div class="swiper-wrapper">
                <!-- JSP Ïó¨Í∏∞ -->
                <c:forEach var="banner" items="${eventBannerList}">
                  <div class="swiper-slide">
                    <img
                      src="${pageContext.request.contextPath}/img/${banner.image}"
                      alt="${banner.alt}"
                    />
                  </div>
                </c:forEach>
              </div>
              <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò/Î≤ÑÌäº -->
              <div class="swiper-pagination"></div>
            </div>
          </section>

          <!-- ÏßÄÍ∏à Î¨¥Î£å : Ïπ¥ÎìúÌòï ÏΩòÌÖêÏ∏† Ïä¨ÎùºÏù¥Îìú -->
          <section class="card-slider mb2">
            <h2 class="section-title mb2">üî• ÏßÄÍ∏à Î¨¥Î£åÏù∏ ÏõπÌà∞!</h2>
            <div class="swiper cardSwiper" data-swiper-id="freeWebtoon">
              <div class="swiper-wrapper ml1 pt3 pb3">
                <!-- ÏõêÌïòÎäî ÎßåÌÅº Î∞òÎ≥µ -->
                <c:forEach var="webtoon" items="${freeWebtoonList}">
                  <div class="swiper-slide">
                    <div class="card">
                      <img
                        src="${pageContext.request.contextPath}/img/${webtoon.thumbnail}"
                        alt="${webtoon.title}"
                      />
                      <!-- Î∞∞ÏßÄ Ïª®ÌÖåÏù¥ÎÑà : Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä Ìï†ÏßÄ or ÏïàÌï†ÏßÄ? -->
                      <div class="badge-container">
                        <c:if test="${webtoon.pOnly}"
                          ><span class="badge ponly">#P ONLY</span></c:if
                        >
                        <c:if test="${webtoon.isUp}"
                          ><span class="badge up">UP</span></c:if
                        >
                        <c:if test="${webtoon.freeEpisodes > 0}">
                          <span class="badge free"
                            >${webtoon.freeEpisodes}Ìôî Î¨¥Î£å</span
                          >
                        </c:if>
                      </div>
                      <p>${webtoon.title}</p>
                      <p>${webtoon.author}</p>
                    </div>
                  </div>
                </c:forEach>
              </div>
              <div class="swiper-button-prev  freeWebtoon-prev"></div>
              <div class="swiper-button-next  freeWebtoon-next"></div>
            </div>
          </section>

          <!-- ÏõπÌà∞ Î≤†Ïä§Ìä∏ : ÏàúÏúÑ Ïä¨ÎùºÏù¥Îìú -->
          <section class="ranking mb2">
            <h2 class="ml2">ÌåêÌÉÄÏßÄ ÏõπÌà∞ Î≤†Ïä§Ìä∏</h2>
            <div class="swiper rank-swiper mt2">
              <div class="swiper-wrapper">
                <!-- swiper-slide Í≥ÑÏÜç Î∞òÎ≥µ -->
                <c:forEach
                  var="i"
                  begin="0"
                  end="${fn:length(rankedList) - 1}"
                  step="2"
                >
                  <div class="swiper-slide">
                    <!-- Ï≤´ Î≤àÏß∏ Ïπ¥Îìú -->
                    <c:set var="rank1" value="${rankedList[i]}" />
                    <div class="rank-card mb2">
                      <div class="rank-cardinner">
                        <img
                          src="${pageContext.request.contextPath}/img/${rank1.image}"
                          alt="ÌëúÏßÄ"
                        />
                        <span class="rank-num">${rank1.rank}</span>
                      </div>
                      <div class="info ml3">
                        <p class="title">${rank1.title}</p>
                        <p class="author">
                          ${rank1.author} ¬∑ ${rank1.freeCount}Ìôî Î¨¥Î£å
                        </p>
                        <p class="rating">
                          ‚≠ê ${rank1.rating} (${rank1.ratingCount})
                        </p>
                      </div>
                    </div>

                    <!-- Îëê Î≤àÏß∏ Ïπ¥Îìú (ÏûàÎäî Í≤ΩÏö∞Îßå) -->
                    <c:if test="${i + 1 < fn:length(rankedList)}">
                      <c:set var="rank2" value="${rankedList[i + 1]}" />
                      <div class="rank-card mb2">
                        <div class="rank-cardinner">
                          <img
                            src="${pageContext.request.contextPath}/img/${rank2.image}"
                            alt="ÌëúÏßÄ"
                          />
                          <span class="rank-num">${rank2.rank}</span>
                        </div>
                        <div class="info ml3">
                          <p class="title">${rank2.title}</p>
                          <p class="author">
                            ${rank2.author} ¬∑ ${rank2.freeCount}Ìôî Î¨¥Î£å
                          </p>
                          <p class="rating">
                            ‚≠ê ${rank2.rating} (${rank2.ratingCount})
                          </p>
                        </div>
                      </div>
                    </c:if>
                  </div>
                </c:forEach>
                </div>
              </div>
              <!-- Ïä¨ÎùºÏù¥Îìú ÌôîÏÇ¥Ìëú -->
              <div class="swiper-button-prev rank-prev"></div>
              <div class="swiper-button-next rank-next"></div>
            </div>
          </section>

          <!-- PAGE Ï∂îÏ≤ú : Ïπ¥Îìú Ïä¨ÎùºÏù¥Îçî -->
          <section class="card-slider mb2">
            <h2 class="section-title mb2">‚≠ê ÌéòÏù¥ÏßÄ Ï∂îÏ≤ú</h2>
            <div class="swiper cardSwiper" data-swiper-id="pageRecommend">
              <div class="swiper-wrapper ml1 pt3 pb3">
                <!-- ÏõêÌïòÎäî ÎßåÌÅº Î∞òÎ≥µ -->
                <c:forEach var="webtoon" items="${freeWebtoonList}">
                  <div class="swiper-slide">
                    <div class="card">
                      <img
                        src="${pageContext.request.contextPath}/img/${webtoon.thumbnail}"
                        alt="${webtoon.title}"
                      />
                      <!-- Î∞∞ÏßÄ Ïª®ÌÖåÏù¥ÎÑà : Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä Ìï†ÏßÄ or ÏïàÌï†ÏßÄ? -->
                      <div class="badge-container">
                        <c:if test="${webtoon.pOnly}"
                          ><span class="badge ponly">#P ONLY</span></c:if
                        >
                        <c:if test="${webtoon.isUp}"
                          ><span class="badge up">UP</span></c:if
                        >
                        <c:if test="${webtoon.freeEpisodes > 0}">
                          <span class="badge free"
                            >${webtoon.freeEpisodes}Ìôî Î¨¥Î£å</span
                          >
                        </c:if>
                      </div>
                      <p>${webtoon.title}</p>
                      <p>${webtoon.author}</p>
                    </div>
                  </div>
                </c:forEach>
              </div>
              <div class="swiper-button-prev pageRecommend-prev"></div>
              <div class="swiper-button-next pageRecommend-next"></div>
            </div>
          </section>

          <!-- ÏµúÏã† ÏóÖÎéÉ : Ïπ¥Îìú Ïä¨ÎùºÏù¥Îçî -->
          <section class="card-slider mb2">
            <h2 class="section-title mb2">ÏµúÏã† ÏóÖÎç∞Ïù¥Ìä∏</h2>
            <div class="swiper cardSwiper" data-swiper-id="recentUpdate">
              <div class="swiper-wrapper ml1 pt3 pb3">
                <c:forEach var="webtoon" items="${freeWebtoonList}">
                  <div class="swiper-slide">
                    <div class="card">
                      <img
                        src="${pageContext.request.contextPath}/img/${webtoon.thumbnail}"
                        alt="${webtoon.title}"
                      />
                      <!-- Î∞∞ÏßÄ Ïª®ÌÖåÏù¥ÎÑà : Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä Ìï†ÏßÄ or ÏïàÌï†ÏßÄ? -->
                      <div class="badge-container">
                        <c:if test="${webtoon.pOnly}"
                          ><span class="badge ponly">#P ONLY</span></c:if
                        >
                        <c:if test="${webtoon.isUp}"
                          ><span class="badge up">UP</span></c:if
                        >
                        <c:if test="${webtoon.freeEpisodes > 0}">
                          <span class="badge free"
                            >${webtoon.freeEpisodes}Ìôî Î¨¥Î£å</span
                          >
                        </c:if>
                      </div>
                      <p>${webtoon.title}</p>
                      <p>${webtoon.author}</p>
                    </div>
                  </div>
                </c:forEach>
              </div>
              <div class="swiper-button-prev recentUpdate-prev"></div>
              <div class="swiper-button-next recentUpdate-next"></div>
            </div>
          </section>
        </div>
      </main>

      <!-- Í≥µÌÜµ Ìë∏ÌÑ∞ -->
      <jsp:include page="/WEB-INF/views/common/footer.jsp" />
    </div>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="${pageContext.request.contextPath}/js/swiper-init.js"></script>


  </body>
</html>
